---
import { getCategory } from "@/shared/utils";
import ProductCard from "../ProductCard.astro";
import { title } from "framer-motion/client";
import { getI18NProducts, getValueFromKey } from "@/i18n";

const category = getCategory({ id: "mixteras" });

const products = category.children;

const { currentLocale } = Astro;
const i18n = getI18NProducts({ currentLocale });

const t = (key: string) => {
  return getValueFromKey(key, i18n);
};

const mixteras = [
  {
    title: t(products[0].name),
    description: "Ricos sandwiches",
    image: "/newVersion/mixtera-1.png",
    url: `/productos/mixteras`,
    customClass: " max-w-full sm:max-w-[48%]  lg:max-w-full",
  },
  {
    title: t(products[1].name),
    description: "Perfectos para el desayuno",
    image: "/newVersion/mixtera-2.png",
    url: `/productos/mixteras`,
  },
  {
    title: t(products[2].name),
    description: "Para la merienda",
    image: "/newVersion/mixtera-3.png",
    url: `/productos/mixteras`,
  },
  {
    title: t(products[3].name),
    description: "Multiples usos",
    image: "/newVersion/mixtera-4.png",
    url: `/productos/mixteras`,
  },
  {
    title: t(products[4].name),
    description: "Varias opciones, 1 mixtera",
    image: "/newVersion/mixtera-5.png",
    url: `/productos/mixteras`,
  },
];

const splitArray = [
  [mixteras[0]],
  mixteras.slice(1, 3),
  mixteras.slice(3,5)
];

---

<section class=" relative lg:block px-10 lg:px-20 overflow-x-clip  bg-interbrasGreen-900 pb-6">
  <div
    class="sticky flex flex-col sm:relative -mt-[1px] lg:h-auto sm:h-[300px] top-[75px] sm:top-0 shadow-xl bg-interbrasGreen-100 w-full sm:w-[49%] lg:w-80 ml-auto rounded-b-[30px] z-[2]"
  >
    <div class="w-full h-1 relative mb-auto">
      <svg
        class="absolute top-[-1px] -left-[49px] rotate-180 size-[50px] fill-interbrasGreen-100"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M0 0C0 13.2548 10.7452 24 24 24H0V0Z"></path>
      </svg>
      <svg
        class="absolute top-[-1px] -right-[49px] rotate-90 size-[50px] fill-interbrasGreen-100"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M0 0C0 13.2548 10.7452 24 24 24H0V0Z"></path>
      </svg>
    </div>

    <div class="h-full w-full p-6 ">
      <div
        class="w-full h-36 sm:h-48 lg:h-52 bg-interbrasGreen-900 rounded-3xl relative overflow-hidden "
      >
        <img
          src="/newVersion/mixtera-0.png"
          class="h-full w-full object-cover"
          alt=""
        />
        <div
          class="text-center absolute text-nowrap -bottom-0 left-1/2 -translate-x-1/2 px-4 bg-interbrasGreen-100 text-xl font-bold rounded-t-xl mt-5"
        >
          <div class="w-full relative h-1">
            <svg
              class="absolute top-[14px] -right-[33px] size-[18px] fill-interbrasGreen-100"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M0 0C0 13.2548 10.7452 24 24 24H0V0Z"></path>
            </svg>

            <svg
              class="absolute top-[14px] -left-[33px] -rotate-90 size-[18px] fill-interbrasGreen-100"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M0 0C0 13.2548 10.7452 24 24 24H0V0Z"></path>
            </svg>
          </div>

          <h3>Mixteras</h3>
        </div>
      </div>

      <a
        class="bg-interbrasGreen-500 text-white rounded-full px-4 py-2 block mt-4 mx-auto text-center"
        href="/productos/mixteras"
      >
        Ver mas
      </a>
    </div>
  </div>

  <div
    class=" flex-wrap  mt-5  lg:w-[calc(100%-20rem)] lg:-mt-72 sm:-mt-72 flex-col lg:flex-row flex justify-around gap-4 relative z-[1] lg:pr-4"
  >
    {
      splitArray.map((item, i) => {
        return (
            <div
                class=" flex gap-4 flex-1 justify-between  "
            >
                {
                item.map((product) => (
                    <ProductCard
                    title={product.title}
                    description={product.description}
                    image={product.image}
                    url={product.url}
                    customClass = { product.customClass }
                    />
                ))
                }
            </div>
        )
      })
    }
  </div>
</section>
